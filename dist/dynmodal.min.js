/**
* DynModal v1.0.0 (https://github.com/jcoon97/dynmodal)
* Created by James Coon (https://github.com/jcoon97)
* Copyright 2018 James Coon and all other Github Contributors
* Licensed under GNU/GPLv3 (https://www.gnu.org/licenses/gpl-3.0.en.html)
**/
"use strict";var DynModal;!function(t){var o=function(){function o(o){if(this.DEFAULTS={centerVertically:!1,removeAnimation:!1,size:t.ModalSize.DEFAULT,onBuilt:null,onShown:null,onHidden:null},!window.jQuery)throw"DynModal must be loaded after jQuery is already present on the page.";this.id=1,this.builtModal=null,this.options=$.extend({},this.DEFAULTS,o),this.sectionManager=new t.SectionManager}return o.prototype.build=function(){var o=$(t.ModalTemplate.DIALOG);if(o.attr("id","dynmodal-"+this.id),this.options.centerVertically&&o.find("div.modal-dialog").addClass("modal-dialog-centered"),this.options.removeAnimation&&o.removeClass("fade"),o.find("div.modal-dialog").addClass(this.options.size),this.sectionManager.has(t.SectionKey.HEADER_TITLE)&&o.find("div.modal-header h5.modal-title").text(this.sectionManager.get(t.SectionKey.HEADER_TITLE)),this.sectionManager.has(t.SectionKey.HEADER_SHOW_CLOSE_BUTTON)&&1==this.sectionManager.get(t.SectionKey.HEADER_SHOW_CLOSE_BUTTON)){var n=$(t.ModalTemplate.HEADER.CLOSE_BUTTON);o.find("div.modal-header").append(n)}if(this.sectionManager.has(t.SectionKey.BODY)){var e=$(this.sectionManager.get(t.SectionKey.BODY));o.find("div.modal-body").empty().append(e)}var i=$(t.ModalTemplate.FOOTER.BASE);this.sectionManager.has(t.SectionKey.FOOTER)?this.sectionManager.get(t.SectionKey.FOOTER).forEach(function(t){var o=$(t);void 0!=o.attr("data-close")&&(o.removeAttr("data-close"),o.attr("data-dismiss","modal")),o.appendTo(i)}):i.append(t.ModalTemplate.FOOTER.CLOSE);return o.find("div.modal-content").append(i),this.builtModal=o,"function"==typeof this.options.onBuilt&&this.options.onBuilt.call(this,this),this},o.prototype.buildAndShow=function(){this.build(),this.show()},o.prototype.getId=function(){return this.id},o.prototype.getModal=function(){if(null==this.builtModal)throw"You must build the modal first before you may retrieve its instance.";return this.builtModal},o.prototype.hide=function(t){var o=this,n=this.getModal();t&&n.modal("hide"),n.on("hidden.bs.modal",function(){"function"==typeof o.options.onHidden&&o.options.onHidden.call(o,o.getId()),n.remove(),o.id+=1,o.builtModal=null})},o.prototype.show=function(){var t=this;if(null==this.builtModal)throw"You must call the #build() function before you may show the modal";var o=this.getModal();$("body").append(o),o.modal("show"),o.on("hide.bs.modal",function(){return t.hide(!1)}),o.on("shown.bs.modal",function(){"function"==typeof t.options.onShown&&t.options.onShown.call(t,t.getId(),t.getModal())})},o.prototype.setBody=function(o){if("function"!=typeof o)throw"You may only pass in a function that returns a string as the argument";if(void 0===o.call())throw"You must return an HTML string to represent the modal body";var n=o.call();if("string"!=typeof n)throw"You may only return a HTML string to be injected into the modal body";return this.sectionManager.add(t.SectionKey.BODY,n),this},o.prototype.setFooter=function(o){return this.sectionManager.add(t.SectionKey.FOOTER,o),this},o.prototype.setHeaderTitle=function(o){return this.sectionManager.add(t.SectionKey.HEADER_TITLE,o),this},o.prototype.setShowCloseButton=function(o){return this.sectionManager.add(t.SectionKey.HEADER_SHOW_CLOSE_BUTTON,o),this},o}();t.Core=o}(DynModal||(DynModal={})),function(t){!function(t){t.HEADER_TITLE="HEADER.TITLE",t.HEADER_SHOW_CLOSE_BUTTON="HEADER.SHOW_CLOSE_BUTTON",t.BODY="BODY",t.FOOTER="FOOTER"}(t.InjectorKey||(t.InjectorKey={}))}(DynModal||(DynModal={})),function(t){!function(t){t.DEFAULT="",t.SMALL="modal-sm",t.LARGE="modal-lg"}(t.ModalSize||(t.ModalSize={}))}(DynModal||(DynModal={})),function(t){!function(t){t.DEFAULT="",t.SMALL="modal-sm",t.LARGE="modal-lg"}(t.ModalSizes||(t.ModalSizes={}))}(DynModal||(DynModal={})),function(t){t.ModalTemplate={DIALOG:"<div class='modal fade' tabindex='-1' role='dialog' aria-hidden='true'>   <div class='modal-dialog' role='document'>       <div class='modal-content'>           <div class='modal-header'>               <h5 class='modal-title'>Default Title</h5>           </div>           <div class='modal-body'>               <p>This is the default body placeholder for DynModal modals.</p><br />               <p>Please use DynModal#setBody(function) to change the contents of this section.</p>           </div>       </div>   </div></div>",HEADER:{CLOSE_BUTTON:"<button type='button' class='close' data-dismiss='modal' aria-label='Close'>   <span aria-hidden='true'>&times;</span></button>"},FOOTER:{BASE:"<div class='modal-footer'></div>",CLOSE:"<button type='button' class='btn btn-primary' data-dismiss='modal'>Close</button>"}}}(DynModal||(DynModal={})),function(t){!function(t){t.HEADER_TITLE="HEADER.TITLE",t.HEADER_SHOW_CLOSE_BUTTON="HEADER.SHOW_CLOSE_BUTTON",t.BODY="BODY",t.FOOTER="FOOTER"}(t.SectionKey||(t.SectionKey={}));var o=function(){function t(t){this.sections=void 0!=t?t:{}}return t.prototype.add=function(t,o){this.sections[t]=o},t.prototype.get=function(t){return this.has(t)?this.sections[t]:null},t.prototype.has=function(t){return void 0!=this.sections[t]},t.prototype.remove=function(t){return!!this.has(t)&&(delete this.sections[t],!0)},t}();t.SectionManager=o}(DynModal||(DynModal={}));